var m=(t,o,a)=>new Promise((r,c)=>{var s=e=>{try{d(a.next(e))}catch(u){c(u)}},i=e=>{try{d(a.throw(e))}catch(u){c(u)}},d=e=>e.done?r(e.value):Promise.resolve(e.value).then(s,i);d((a=a.apply(t,o)).next())});import{B as p,J as S,aJ as n,I as l,ax as f}from"./index-3efa3bcd.js";import{u as g,f as w}from"./chartEditStore-1e6a587f.js";import{u as h}from"./useSync.hook-e4169a36.js";import{g as H}from"./plugin-52ae8d1b.js";const{updateComponent:y,dataSyncUpdate:v}=h(),E=g(),R=()=>{H({message:"是否覆盖源视图内容，此操作不可撤回?",isMaskClosable:!0,transformOrigin:"center",onPositiveCallback:()=>m(void 0,null,function*(){window.$message.success("正在同步编辑器..."),v&&(yield v()),dispatchEvent(new CustomEvent(n.CHART,{detail:E.getStorageInfo}))})})},C=()=>{dispatchEvent(new CustomEvent(n.CHART_TO_PREVIEW,{detail:E.getStorageInfo}))},O=()=>{const t=s=>{window.$message.success("正在进行更新..."),y(s.detail,!0)},o=()=>{E.setEditCanvas(w.IS_CODE_EDIT,!1)},a=()=>{addEventListener("blur",C),addEventListener(n.JSON,t),addEventListener(n.CLOSE,f(o,1e3))},r=()=>{removeEventListener("blur",C),removeEventListener(n.JSON,t)};return(s,i)=>{i==l.CHART_HOME_NAME&&r(),s==l.CHART_HOME_NAME&&a()}},D=()=>{const t=p();S(()=>t.name,O(),{immediate:!0})};export{R as s,D as u};
