var gt=Object.defineProperty,mt=Object.defineProperties;var Ct=Object.getOwnPropertyDescriptors;var je=Object.getOwnPropertySymbols;var yt=Object.prototype.hasOwnProperty,St=Object.prototype.propertyIsEnumerable;var Je=(e,o,s)=>o in e?gt(e,o,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[o]=s,H=(e,o)=>{for(var s in o||(o={}))yt.call(o,s)&&Je(e,s,o[s]);if(je)for(var s of je(o))St.call(o,s)&&Je(e,s,o[s]);return e},ge=(e,o)=>mt(e,Ct(o));var de=(e,o,s)=>new Promise((_,t)=>{var h=p=>{try{v(s.next(p))}catch(i){t(i)}},l=p=>{try{v(s.throw(p))}catch(i){t(i)}},v=p=>p.done?_(p.value):Promise.resolve(p.value).then(h,l);v((s=s.apply(e,o)).next())});import{m as Ke,a2 as at,cV as xt,aM as Be,cW as z,bh as He,ac as Tt,d as j,bg as he,O as fe,a1 as M,o as w,c as P,a as ze,F as re,q as ue,aw as ne,av as q,u as a,a6 as ye,n as I,h as ee,aE as rt,D as N,w as x,E as _e,ay as Ne,az as $e,aA as Xe,aB as ct,ab as Z,a0 as lt,l as Fe,ad as Ze,J as ae,ax as it,r as D,cX as wt,$ as Se,j as B,cY as Qe,s as Me,x as Re,b as T,g as Et,e as ve,t as Q,aZ as bt,cI as X,cJ as K,a_ as pe,cH as kt,Q as be,U as ke,ba as Lt,cZ as $t,aL as Dt,c_ as It,ae as Mt,c$ as Rt,B as Ut,ah as et,bl as Ot,M as Ht,d0 as At,aN as Pt,N as Yt,ak as Bt,al as Ee,aK as Ae,d1 as Nt,bx as Xt}from"./index-3efa3bcd.js";import{u as We,d as Gt}from"./index-b2af6ac6.js";import{u as te,f as V,h as $,i as Le,a as Kt}from"./chartEditStore-1e6a587f.js";import{e as zt,l as De,S as Ft}from"./index-a77faccb.js";import{a as Wt}from"./useKeyboard.hook-875fbcac.js";import{u as ut}from"./useSync.hook-e4169a36.js";import{a as Vt,b as tt,l as qt,g as jt}from"./plugin-52ae8d1b.js";import{C as Jt}from"./index-9922ee7a.js";import"./querySelectorAll-a1c431d2.js";import{l as ot}from"./listen-92ff7612.js";import{u as dt,C as pt}from"./chartLayoutStore-db3d2e1b.js";import{i as le}from"./icon-f6cbc454.js";import{G as Zt}from"./index.vue_vue_type_script_setup_true_lang-79980f2a.js";import{F as st}from"./fileTypeEnum-21359a08.js";import{u as Qt}from"./useSyncUpdate.hook-1944a622.js";import"./index-243612e8.js";import"./SettingItem-aacbe70b.js";/* empty css                                                                      */import"./SettingItemBox-94318b9b.js";import"./CollapseItem.vue_vue_type_script_setup_true_lang-bd202dab.js";import"./index.esm.min-21e18cb2.js";import"./project.api-31a95c84.js";const me=te(),eo=e=>{let o=()=>{};Ke(()=>de(void 0,null,function*(){me.setEditCanvas(V.EDIT_LAYOUT_DOM,document.getElementById("go-chart-edit-layout")),me.setEditCanvas(V.EDIT_CONTENT_DOM,document.getElementById("go-chart-edit-content")),yield e(),o=me.listenerScale()})),at(()=>{me.setEditCanvas(V.EDIT_LAYOUT_DOM,null),me.setEditCanvas(V.EDIT_CONTENT_DOM,null),o()})},y=te(),{onClickOutSide:to}=We(),oo=e=>de(void 0,null,function*(){e.preventDefault();try{Vt();const o=e.dataTransfer.getData(xt.DRAG_KEY);if(!o){tt();return}y.setEditCanvas(V.IS_CREATE,!1);const s=Be(o);if(s.disabled)return;let _=yield zt(s);s.redirectComponent&&(s.dataset&&(_.option.dataset=s.dataset),_.chartConfig.title=s.title,_.chartConfig.chartFrame=s.chartFrame),z(_,e.offsetX-_.attr.w/2,e.offsetY-_.attr.h/2),y.addComponentList(_,!1,!0),y.setTargetSelectChart(_.id),tt()}catch(o){qt(),window.$message.warning("å›¾è¡¨æ­£åœ¨ç ”å‘ä¸­, æ•¬è¯·æœŸå¾…...")}}),nt=e=>{e.preventDefault(),e.stopPropagation(),e.dataTransfer&&(e.dataTransfer.dropEffect="copy")},_t=(e,o)=>{if(o){y.setTargetSelectChart(o.id);return}y.setTargetSelectChart(void 0)},so=(e,o)=>{var i;if(e.which==2||(i=window.$KeyboardActive)!=null&&i.space)return;_t();const s=e.offsetX,_=e.offsetY,t=e.screenX,h=e.screenY,l=y.getEditCanvas.scale;y.setMousePosition(void 0,void 0,s,_);const v=De.throttle(d=>{y.setTargetSelectChart(),y.setEditCanvas(V.IS_SELECT,!0);const r=s+d.screenX-t,n=_+d.screenY-h;y.setMousePosition(r,n);const f={x1:0,y1:0,x2:0,y2:0};r>s&&n>_?(f.x1=s,f.y1=_,f.x2=Math.round(s+(d.screenX-t)/l),f.y2=Math.round(_+(d.screenY-h)/l)):r>s&&n<_?(f.x1=s,f.y1=Math.round(_-(h-d.screenY)/l),f.x2=Math.round(s+(d.screenX-t)/l),f.y2=_):r<s&&n>_?(f.x1=Math.round(s-(t-d.screenX)/l),f.y1=_,f.x2=s,f.y2=Math.round(_+(d.screenY-h)/l)):(f.x1=Math.round(s-(t-d.screenX)/l),f.y1=Math.round(_-(h-d.screenY)/l),f.x2=s,f.y2=_),y.getComponentList.forEach(c=>{if(!y.getTargetChart.selectId.includes(c.id)){const{x:u,y:S,w:g,h:L}=c.attr,E={x1:u,y1:S,x2:u+g,y2:S+L};E.x1-f.x1>=0&&E.y1-f.y1>=0&&E.x2-f.x2<=0&&E.y2-f.y2<=0&&!c.status.lock&&!c.status.hide&&y.setTargetSelectChart(c.id,!0)}})},30),p=()=>{v.cancel(),y.setEditCanvas(V.IS_SELECT,!1),y.setMousePosition(0,0,0,0),document.removeEventListener("mousemove",v),document.removeEventListener("mouseup",p)};document.addEventListener("mousemove",v),document.addEventListener("mouseup",p)},vt=()=>({mouseClickHandle:(t,h)=>{var l;if(t.preventDefault(),t.stopPropagation(),!h.status.lock&&(l=window.$KeyboardActive)!=null&&l.ctrl)if(y.targetChart.selectId.includes(h.id)){const v=y.targetChart.selectId.filter(p=>p!==h.id);y.setTargetSelectChart(v)}else y.setTargetSelectChart(h.id,!0)},mousedownHandle:(t,h)=>{var S;if(t.preventDefault(),t.stopPropagation(),h.status.lock||(to(),t.buttons===He.LEFT&&((S=window.$KeyboardActive)!=null&&S.ctrl)))return;const l=y.getTargetChart.selectId;if(t.buttons===He.RIGHT&&l.length>1&&l.includes(h.id)||(y.setTargetSelectChart(h.id),t.buttons===He.RIGHT))return;const v=y.getEditCanvas.scale,p=y.getEditCanvasConfig.width,i=y.getEditCanvasConfig.height,d=new Map;y.getTargetChart.selectId.forEach(g=>{const L=y.fetchTargetIndex(g);if(L!==-1){const{x:E,y:b,w:Y,h:G}=Tt(y.getComponentList[L]).attr;d.set(g,{x:E,y:b,w:Y,h:G})}});const r=t.screenX,n=t.screenY;let f=[];y.getTargetChart.selectId.forEach(g=>{if(!d.has(g))return;const L=y.fetchTargetIndex(g);f.push(De.cloneDeep(y.getComponentList[L]))}),y.setMousePosition(void 0,void 0,r,n);const c=De.throttle(g=>{y.setEditCanvas(V.IS_DRAG,!0),y.setMousePosition(g.screenX,g.screenY);let L=(g.screenX-r)/v,E=(g.screenY-n)/v;y.getTargetChart.selectId.forEach(b=>{if(!d.has(b))return;const Y=y.fetchTargetIndex(b),{x:G,y:se,w:A,h:m}=d.get(b),R=y.getComponentList[Y];let C=Math.round(G+L),k=Math.round(se+E);const U=50;C=C<-A+U?-A+U:C,k=k<-m+U?-m+U:k,C=C>p-U?p-U:C,k=k>i-U?i-U:k,R&&(R.attr=Object.assign(R.attr,{x:C,y:k}))})},20),u=()=>{try{y.setMousePosition(0,0,0,0),y.setEditCanvas(V.IS_DRAG,!1),f.length&&(y.getTargetChart.selectId.forEach(g=>{if(!d.has(g))return;const L=y.fetchTargetIndex(g),E=y.getComponentList[L];f.forEach(b=>{b.id===g&&(b.attr=Object.assign(b.attr,{offsetX:E.attr.x-b.attr.x,offsetY:E.attr.y-b.attr.y}))})}),y.moveComponentList(f)),document.removeEventListener("mousemove",c),document.removeEventListener("mouseup",u)}catch(g){console.log(g)}};document.addEventListener("mousemove",c),document.addEventListener("mouseup",u)},mouseenterHandle:(t,h)=>{t.preventDefault(),t.stopPropagation(),y.getEditCanvas.isSelect||y.setTargetHoverChart(h.id)},mouseleaveHandle:(t,h)=>{t.preventDefault(),t.stopPropagation(),y.setEditCanvas(V.IS_DRAG,!1),y.setTargetHoverChart(void 0)}}),no=(e,o,s)=>{e.stopPropagation(),e.preventDefault(),y.setEditCanvas(V.IS_DRAG,!0);const _=y.getEditCanvas.scale,t=s.x,h=s.y,l=s.w,v=s.h,p=e.screenX,i=e.screenY;y.setMousePosition(p,i);const d=De.throttle(n=>{y.setMousePosition(n.screenX,n.screenY);let f=Math.round((n.screenX-p)/_),c=Math.round((n.screenY-i)/_);const u=/t/.test(o),S=/b/.test(o),g=/l/.test(o),L=/r/.test(o),E=v+(u?-c:S?c:0),b=l+(g?-f:L?f:0);s.h=E>0?E:0,s.w=b>0?b:0,s.x=t+(g?f:0),s.y=h+(u?c:0)},50),r=()=>{y.setEditCanvas(V.IS_DRAG,!1),y.setMousePosition(0,0,0,0),document.removeEventListener("mousemove",d),document.removeEventListener("mouseup",r)};document.addEventListener("mousemove",d),document.addEventListener("mouseup",r)},Ie=(e,o)=>e?{zIndex:o+1,left:`${e.x}px`,top:`${e.y}px`}:{},ie=(e,o)=>e?{width:`${o?o*e.w:e.w}px`,height:`${o?o*e.h:e.h}px`}:{},ao=(e,o,s,_)=>{const{w:t,h}=s,l=/t/.test(e),v=/b/.test(e),p=/l/.test(e),i=/r/.test(e);let d=0,r=0;return e.length===2?(d=p?0:t,r=l?0:h):((l||v)&&(d=t/2,r=l?0:h),(p||i)&&(d=p?0:t,r=Math.floor(h/2))),{left:`${d}px`,top:`${r}px`,cursor:_[o]+"-resize"}},ro=["onMousedown"],co=j({__name:"index",props:{item:{type:Object,required:!0},hiddenPoint:{type:Boolean,required:!1}},setup(e){const o=e;he(r=>({d1318c92:l.value}));const s=fe(),_=te(),t=["t","r","b","l","lt","rt","lb","rb"],h=["n","e","s","w","nw","ne","sw","se"],l=M(()=>s.getAppTheme),v=M(()=>_.getEditCanvas[V.IS_DRAG]||o.item.status.lock?!1:o.item.id===_.getTargetChart.hoverId),p=M(()=>{const r=o.item.id;return o.item.status.lock?!1:_.getTargetChart.selectId.find(n=>n===r)}),i=M(()=>o.item.status.lock),d=M(()=>o.item.status.hide);return(r,n)=>(w(),P("div",{class:ne(["go-shape-box",{lock:i.value,hide:d.value}])},[ze(r.$slots,"default",{},void 0,!0),e.hiddenPoint?ye("",!0):(w(!0),P(re,{key:0},ue(p.value?t:[],(f,c)=>(w(),P("div",{class:ne(`shape-point ${f}`),key:c,style:q(a(ao)(f,c,e.item.attr,h)),onMousedown:u=>a(no)(u,f,e.item.attr)},null,46,ro))),128)),I("div",{class:"shape-modal",style:q(a(ie)(e.item.attr))},[I("div",{class:ne(["shape-modal-select",{active:p.value}])},null,2),I("div",{class:ne(["shape-modal-change",{selectActive:p.value,hoverActive:v.value}])},null,2)],4)],2))}});const Ge=ee(co,[["__scopeId","data-v-47db715a"]]),lo={class:"go-edit-group-box"},io=j({__name:"index",props:{groupData:{type:Object,required:!0},groupIndex:{type:Number,required:!0}},setup(e){const o=te(),{handleContextMenu:s}=We(),{mouseenterHandle:_,mouseleaveHandle:t,mousedownHandle:h,mouseClickHandle:l}=vt(),v=(d,r,n)=>{const f=c=>r.filter(u=>c.includes(u.key));if(o.getTargetChart.selectId.length>1)return f([Z.GROUP,Z.DELETE]);{const c=[];n.status.lock?c.push(Z.LOCK):c.push(Z.UNLOCK),n.status.hide?c.push(Z.HIDE):c.push(Z.SHOW);const u=[Z.UN_GROUP];return[...f(u),Gt(),...d.filter(S=>!c.includes(S.key))]}},p=M(()=>rt(o.getEditCanvasConfig.chartCustomThemeColorInfo)[o.getEditCanvasConfig.chartThemeColor]),i=M(()=>o.getEditCanvasConfig.chartThemeSetting);return(d,r)=>(w(),P("div",lo,[(w(),N(a(Ge),{key:e.groupData.id,"data-id":e.groupData.id,index:e.groupIndex,item:e.groupData,hiddenPoint:!0,class:ne(a(Ne)(e.groupData.styles.animations)),style:q(H(H(H(H(H({},a(Ie)(e.groupData.attr,e.groupIndex)),a(ie)(e.groupData.attr)),a($e)(e.groupData.styles)),a(Xe)(e.groupData.styles)),a(ct)(e.groupData.styles))),onClick:r[0]||(r[0]=n=>a(l)(n,e.groupData)),onMousedown:r[1]||(r[1]=n=>a(h)(n,e.groupData)),onMouseenter:r[2]||(r[2]=n=>a(_)(n,e.groupData)),onMouseleave:r[3]||(r[3]=n=>a(t)(n,e.groupData)),onContextmenu:r[4]||(r[4]=n=>a(s)(n,e.groupData,v))},{default:x(()=>[(w(!0),P(re,null,ue(e.groupData.groupList,n=>(w(),N(a(Ge),{key:n.id,"data-id":n.id,index:e.groupIndex,item:n,hiddenPoint:!0,style:q(H({},a(Ie)(n.attr,e.groupIndex)))},{default:x(()=>[(w(),N(_e(n.chartConfig.chartKey),{class:ne(["edit-content-chart",a(Ne)(n.styles.animations)]),chartConfig:n,themeSetting:i.value,themeColor:p.value,style:q(H(H(H({},a(ie)(n.attr)),a($e)(n.styles)),a(Xe)(n.styles)))},null,8,["class","chartConfig","themeSetting","themeColor","style"]))]),_:2},1032,["data-id","index","item","style"]))),128))]),_:1},8,["data-id","index","item","class","style"]))]))}}),uo={class:"go-edit-align-line"},po=j({__name:"index",setup(e){he(c=>({"05d3f33b":l.value}));const o=fe(),s=te(),_=lt(),t=Fe({lineArr:["rowt","rowc","rowb","coll","colc","colr"],select:new Map,sorptioned:{x:!1,y:!1}}),h=c=>c?{left:`${c.x?c.x:0}px`,top:`${c.y?c.y:0}px`}:{},l=M(()=>o.getAppTheme),v=M(()=>_.getChartAlignRange),p=M(()=>s.getEditCanvas[V.IS_DRAG]),i=(c,u)=>Math.abs(c-u)<=v.value,d=M(()=>s.getTargetChart.selectId),r=M(()=>s.getComponentList[s.fetchTargetIndex()]),n=M(()=>{var c;return((c=r.value)==null?void 0:c.attr)||{}}),f=M(()=>({id:"0",attr:{w:Ze(s.getEditCanvasConfig.width),h:Ze(s.getEditCanvasConfig.height),x:0,y:0,offsetX:0,offsetY:0,zIndex:0}}));return ae(()=>s.getMousePosition,it(()=>{try{if(!p.value||d.value.length!==1)return;const c=n.value.w,u=n.value.h,S=n.value.x,g=S+c/2,L=S+c,E=[S,g,L],b=n.value.y,Y=b+u/2,G=b+u,se=[b,Y,G];t.select.clear(),t.sorptioned.y=!1;const A=s.getComponentList.map(m=>({id:m.id,attr:m.attr}));A.push(f.value),t.lineArr.forEach(m=>{A.forEach(R=>{if(d.value[0]===R.id)return;const C=R.attr.w,k=R.attr.h,U=R.attr.x,W=U+C/2,O=U+C,xe=[U,W,O],F=R.attr.y,J=F+k/2,oe=F+k,qe=[F,J,oe];m.includes("rowt")&&(i(b,F)&&(t.select.set(m,{y:F}),z(r.value,S,F)),i(b,J)&&(t.select.set(m,{y:J}),z(r.value,S,J)),i(b,oe)&&(t.select.set(m,{y:oe}),z(r.value,S,oe))),m.includes("rowc")&&(i(Y,F)&&(t.select.set(m,{y:F}),z(r.value,S,F-u/2)),i(Y,J)&&(t.select.set(m,{y:J}),z(r.value,S,J-u/2)),i(Y,oe)&&(t.select.set(m,{y:oe}),z(r.value,S,oe-u/2))),m.includes("rowb")&&(i(G,F)&&(t.select.set(m,{y:F}),z(r.value,S,F-u)),i(G,J)&&(t.select.set(m,{y:J}),z(r.value,S,J-u)),i(G,oe)&&(t.select.set(m,{y:oe}),z(r.value,S,oe-u))),m.includes("coll")&&(i(S,U)&&(t.select.set(m,{x:U}),z(r.value,U,b)),i(S,W)&&(t.select.set(m,{x:W}),z(r.value,W,b)),i(S,O)&&(t.select.set(m,{x:O}),z(r.value,O,b))),m.includes("colc")&&(i(g,U)&&(t.select.set(m,{x:U}),z(r.value,U-c/2,b)),i(g,W)&&(t.select.set(m,{x:W}),z(r.value,W-c/2,b)),i(g,O)&&(t.select.set(m,{x:O}),z(r.value,O-c/2,b))),m.includes("colr")&&(i(L,U)&&(t.select.set(m,{x:U}),z(r.value,U-c,b)),i(L,W)&&(t.select.set(m,{x:W}),z(r.value,W-c,b)),i(L,O)&&(t.select.set(m,{x:O}),z(r.value,O-c,b)))})})}catch(c){console.log(c)}},200),{deep:!0}),ae(()=>p.value,c=>{c||(t.select.clear(),t.sorptioned.y=!1)}),(c,u)=>(w(),P("div",uo,[(w(!0),P(re,null,ue(t.lineArr,S=>(w(),P("div",{class:ne(["line",[S.includes("row")?"row":"col",t.select.has(S)&&"visible"]]),key:S,style:q(h(t.select.get(S)))},null,6))),128))]))}});const _o=ee(po,[["__scopeId","data-v-41025e73"]]),vo=j({__name:"index",setup(e){return(o,s)=>{const _=D("n-watermark");return w(),N(_,{id:"go-edit-watermark",content:a(wt),cross:"",selectable:"","font-size":16,"line-height":16,width:500,height:150,"x-offset":12,"y-offset":80,rotate:-15},null,8,["content"])}}});const ho=ee(vo,[["__scopeId","data-v-e5767c3f"]]),ht=e=>(Me("data-v-2475801a"),e=e(),Re(),e),fo=ht(()=>I("div",{class:"select-background"},null,-1)),go=ht(()=>I("div",{class:"select-border"},null,-1)),mo=[fo,go],Co=j({__name:"index",setup(e){he(v=>({"7ea45b78":h.value}));const o=fe(),s=te(),{isSelect:_,scale:t}=Se(s.getEditCanvas),h=M(()=>o.getAppTheme),l=B();return ae(()=>s.getMousePosition,v=>{if(!_.value)return;const{startX:p,startY:i,x:d,y:r}=v,n={zIndex:Qe,x:0,y:0,w:0,h:0,offsetX:0,offsetY:0};d>p&&r>i?(n.x=p,n.y=i,n.w=Math.round((d-p)/t.value),n.h=Math.round((r-i)/t.value)):d>p&&r<i?(n.x=p,n.w=Math.round((d-p)/t.value),n.h=Math.round((i-r)/t.value),n.y=i-n.h):d<p&&r>i?(n.y=i,n.w=Math.round((p-d)/t.value),n.h=Math.round((r-i)/t.value),n.x=p-n.w):(n.w=Math.round((p-d)/t.value),n.h=Math.round((i-r)/t.value),n.x=p-n.w,n.y=i-n.h),l.value=H(H({},Ie(n,Qe)),ie(n))},{deep:!0}),(v,p)=>a(_)?(w(),P("div",{key:0,class:"go-edit-select",style:q(l.value)},mo,4)):ye("",!0)}});const yo=ee(Co,[["__scopeId","data-v-2475801a"]]),So=j({__name:"index",setup(e){const o=te(),{getEditCanvasConfig:s,getEditCanvas:_}=Se(o),t=M(()=>({w:s.value.width,h:s.value.height})),h=M(()=>{const v={transform:`scale(${_.value.scale})`};return H(H({},ie(t.value)),v)}),l=M(()=>{const v=_.value.isCreate&&{"z-index":99999};return H(H({},ie(t.value)),v)});return(v,p)=>(w(),P("div",{class:"go-edit-range go-transition",style:q(h.value),onMousedown:p[0]||(p[0]=i=>a(so)(i,void 0))},[ze(v.$slots,"default",{},void 0,!0),T(a(ho)),T(a(_o)),T(a(yo)),I("div",{class:"go-edit-range-model",style:q(l.value)},null,4)],36))}});const xo=ee(So,[["__scopeId","data-v-c58ee980"]]),To={class:"go-sketch-rule"},wo={key:1,class:"fix-edit-screens-block"},Pe=20,Eo=j({__name:"index",setup(e){he(C=>({c0a3b574:b.value,"5df1c9f1":L.value,"310d5f4f":r.value}));const o=te(),s=dt(),_=fe();let t=[0,0],h=[0,0];const l=B(),v=B(!0),p=B(),i=B(),d=B(!1),r=B("auto"),{width:n,height:f}=Se(o.getEditCanvasConfig),c=B(0),u=B(0),S=Fe({h:[],v:[]}),g=M(()=>o.getEditCanvas.scale),L=M(()=>`${f.value*2}px`),E=M(()=>_.getDarkTheme?{bgColor:"#18181c",longfgColor:"#4d4d4d",shortfgColor:"#4d4d4d",fontColor:"#4d4d4d",shadowColor:"#18181c",borderColor:"#18181c",cornerActiveColor:"#18181c"}:{}),b=M(()=>_.getAppTheme),Y=C=>{if(C.ctrlKey||C.metaKey){C.preventDefault();let k=g.value;if(C.wheelDelta>=0&&g.value<2){k=g.value+.05,o.setScale(k);return}C.wheelDelta<0&&g.value>.1&&(k=g.value-.05,o.setScale(k))}},G=()=>{if(!l.value)return;const C=l.value.getBoundingClientRect(),k=p.value.getBoundingClientRect();c.value=(C.left+Pe-k.left)/g.value,u.value=(C.top+Pe-k.top)/g.value},se=C=>{var xe,F;if(C.preventDefault(),C.stopPropagation(),C.which==2)d.value=!0;else if(!((xe=window.$KeyboardActive)!=null&&xe.space))return;(F=document.activeElement)==null||F.blur();const k=C.pageX,U=C.pageY,W=ot(window,"mousemove",J=>{const oe=J.pageX-k,qe=J.pageY-U,[Ue,Te]=t,[Oe,we]=h;t=[Te,oe],h=[we,qe],l.value.scrollLeft-=Te>Ue?Math.abs(Te-Ue):-Math.abs(Te-Ue),l.value.scrollTop-=we>Oe?Math.abs(we-Oe):-Math.abs(we-Oe)}),O=ot(window,"mouseup",()=>{W(),O(),t=[0,0],h=[0,0],d.value=!1})},A=()=>{const C=document.getElementById("go-chart-edit-layout");return C?{height:C.clientHeight-20,width:C.clientWidth-20}:{width:n.value,height:f.value}},m=()=>{v.value=!1,setTimeout(()=>{v.value=!0},10)},R=()=>{const{width:C,height:k}=i.value.getBoundingClientRect(),{width:U,height:W}=A();l.value.scrollLeft=C/2-U/2,l.value.scrollTop=k/2-W/2};return ae(()=>_.getDarkTheme,()=>{m()}),ae(()=>g.value,(C,k)=>{k!==C&&s.getRePositionCanvas?(s.setItemUnHandle(pt.RE_POSITION_CANVAS,!1),G(),setTimeout(()=>{R(),m()},400)):it(m,20)}),ae(()=>d.value,C=>{r.value=C?"grab":"auto"}),Ke(()=>{l.value&&(l.value.addEventListener("wheel",Y,{passive:!1}),R())}),at(()=>{l.value&&l.value.removeEventListener("wheel",Y)}),window.onKeySpacePressHold=C=>{d.value=C},(C,k)=>{const U=D("sketch-rule");return w(),P("div",To,[v.value?(w(),N(U,{key:0,thick:Pe,scale:g.value,width:A().width,height:A().height,startX:c.value,startY:u.value,lines:S,palette:E.value},null,8,["scale","width","height","startX","startY","lines","palette"])):ye("",!0),I("div",{ref_key:"$app",ref:l,class:"edit-screens",onScroll:G},[I("div",{ref_key:"$container",ref:i,class:"edit-screen-container",style:q({width:a(n)*2+"px"})},[I("div",{ref_key:"refSketchRuleBox",ref:p,class:"canvas",onMousedown:se,style:q({marginLeft:"-"+(A().width/2-25)+"px"})},[I("div",{style:q({pointerEvents:d.value?"none":"auto"})},[ze(C.$slots,"default",{},void 0,!0)],4)],36)],4)],544),a(_).getDarkTheme?(w(),P("div",wo)):ye("",!0)])}}});const bo=ee(Eo,[["__scopeId","data-v-ae1deeed"]]),Ye={[$.ADD]:"æ–°å¢ž",[$.DELETE]:"åˆ é™¤",[$.UPDATE]:"æ›´æ–°",[$.MOVE]:"ç§»åŠ¨",[$.PASTE]:"ç²˜è´´",[$.COPY]:"å¤åˆ¶",[$.CUT]:"å‰ªåˆ‡",[$.TOP]:"ç½®é¡¶",[$.BOTTOM]:"ç½®åº•",[$.UP]:"ä¸Šç§»",[$.DOWN]:"ä¸‹ç§»",[$.GROUP]:"æˆç»„",[$.UN_GROUP]:"è§£ç»„",[$.LOCK]:"é”å®š",[$.UNLOCK]:"è§£é”",[$.HIDE]:"éšè—",[$.SHOW]:"æ˜¾ç¤º",[Le.CANVAS]:"ç”»å¸ƒåˆå§‹åŒ–"};var ko=Array.prototype,Lo=ko.reverse;function $o(e){return e==null?e:Lo.call(e)}var Do=$o;const Io=Et(Do),ft=e=>(Me("data-v-009cfccc"),e=e(),Re(),e),Mo={class:"go-flex-items-center"},Ro=ft(()=>I("span",{class:"btn-text"},"åŽ†å²è®°å½•",-1)),Uo={class:"history-list-box"},Oo=["title"],Ho=ft(()=>I("div",{class:"popover-modal"},null,-1)),Ao=j({__name:"index",setup(e){const{DesktopOutlineIcon:o,PencilIcon:s,TrashIcon:_,CopyIcon:t,LayersIcon:h,DuplicateIcon:l,HelpOutlineIcon:v,LockClosedOutlineIcon:p,LockOpenOutlineIcon:i,EyeOffOutlineIcon:d,EyeOutlineIcon:r}=le.ionicons5,{StackedMoveIcon:n,Carbon3DCursorIcon:f,Carbon3DSoftwareIcon:c}=le.carbon,u=Kt(),S=E=>{if(E.targetType===Le.CANVAS)return o;switch(E.actionType){case $.UPDATE:return s;case $.DELETE:return _;case $.PASTE:return t;case $.TOP:return h;case $.BOTTOM:return h;case $.UP:return h;case $.DOWN:return h;case $.MOVE:return n;case $.ADD:return l;case $.GROUP:return f;case $.UN_GROUP:return c;case $.LOCK:return p;case $.UNLOCK:return i;case $.HIDE:return d;case $.SHOW:return r;default:return s}},g=E=>{if(E.targetType===Le.CANVAS)return Ye[Le.CANVAS];if(E.actionType===$.GROUP||E.actionType===$.UN_GROUP)return`${Ye[E.actionType]}`;if(E.historyData.length)return`${Ye[E.actionType]} - ${E.historyData[0].chartConfig.title}`},L=M(()=>{const b=u.getBackStack.map(Y=>({label:g(Y),icon:S(Y)}));return Io(b.filter(Y=>Y.label))});return(E,b)=>{const Y=D("n-button"),G=D("n-icon"),se=D("n-text"),A=D("n-scrollbar"),m=D("n-popover"),R=D("n-tooltip");return w(),P("div",Mo,[T(m,{class:"edit-history-popover","show-arrow":!1,size:"small",trigger:"click",placement:"top-start"},{trigger:x(()=>[T(Y,{class:"mr-10",secondary:"",size:"small",disabled:L.value.length===0},{default:x(()=>[Ro]),_:1},8,["disabled"])]),default:x(()=>[I("div",Uo,[T(A,{style:{"max-height":"500px"}},{default:x(()=>[(w(!0),P(re,null,ue(L.value,(C,k)=>(w(),P("div",{class:"list-item go-flex-items-center go-ellipsis-1",key:k,title:C.label},[T(G,{class:"item-icon",size:"16",depth:2,component:C.icon},null,8,["component"]),T(se,{depth:"2"},{default:x(()=>[ve(Q(C.label),1)]),_:2},1024)],8,Oo))),128))]),_:1}),Ho])]),_:1}),T(R,{trigger:"hover"},{trigger:x(()=>[T(G,{size:"21",depth:3},{default:x(()=>[T(a(v))]),_:1})]),default:x(()=>[I("span",null,"æœ€å¤šåªä¿ç•™"+Q(a(bt))+"æ¡è®°å½•",1)]),_:1})])}}});const Po=ee(Ao,[["__scopeId","data-v-009cfccc"]]),Ve=e=>(Me("data-v-b3c8d1a4"),e=e(),Re(),e),Yo=Ve(()=>I("th",null,"åŠŸèƒ½",-1)),Bo=Ve(()=>I("th",null,"Win å¿«æ·é”®",-1)),No=Ve(()=>I("span",null," Mac å¿«æ·é”® ",-1)),Xo={key:0},Go={key:1},Ko=j({__name:"ShortcutKeyModal",props:{modelShow:Boolean},emits:["update:modelShow"],setup(e,{emit:o}){const s=e,{CloseIcon:_}=le.ionicons5,t=B(!1);ae(()=>s.modelShow,v=>{t.value=v});const h=[{label:"æ‹–æ‹½ç”»å¸ƒ",win:`${X.SPACE.toUpperCase()} + ðŸ–±ï¸ `,mac:`${K.SPACE.toUpperCase()} + ðŸ–±ï¸ `,macSource:!0},{label:"å‘ ä¸Š/å³/ä¸‹/å·¦ ç§»åŠ¨",win:`${X.CTRL.toUpperCase()} + â†‘ æˆ– â†’ æˆ– â†“ æˆ– â†`,mac:`${K.CTRL.toUpperCase()} + â†‘ `},{label:"é”å®š",win:`${X.CTRL.toUpperCase()} + L `,mac:`${K.CTRL.toUpperCase()} + L `},{label:"è§£é”",win:`${X.CTRL.toUpperCase()} + ${X.SHIFT.toUpperCase()}+ L `,mac:`${K.CTRL.toUpperCase()} + ${K.SHIFT.toUpperCase()} + L `},{label:"å±•ç¤º",win:`${X.CTRL.toUpperCase()} + H `,mac:`${K.CTRL.toUpperCase()} + H `},{label:"éšè—",win:`${X.CTRL.toUpperCase()} + ${X.SHIFT.toUpperCase()} + H `,mac:`${K.CTRL.toUpperCase()} + ${K.SHIFT.toUpperCase()} + H `},{label:"åˆ é™¤",win:"Delete".toUpperCase(),mac:`${K.CTRL.toUpperCase()} + Backspace `},{label:"å¤åˆ¶",win:`${X.CTRL.toUpperCase()} + C `,mac:`${K.CTRL.toUpperCase()} + C `},{label:"å‰ªåˆ‡",win:`${X.CTRL.toUpperCase()} + X `,mac:`${K.CTRL.toUpperCase()} + X `},{label:"ç²˜è´´",win:`${X.CTRL.toUpperCase()} + V `,mac:`${K.CTRL.toUpperCase()} + V `},{label:"åŽé€€",win:`${X.CTRL.toUpperCase()} + Z `,mac:`${K.CTRL.toUpperCase()} + Z `},{label:"å‰è¿›",win:`${X.CTRL.toUpperCase()} + ${X.SHIFT.toUpperCase()} + Z `,mac:`${K.CTRL.toUpperCase()} + ${K.SHIFT.toUpperCase()} + Z `},{label:"ä¿å­˜",win:`${X.CTRL.toUpperCase()} + S `,mac:`${K.CTRL.toUpperCase()} + S `},{label:"å¤šé€‰",win:`${X.CTRL.toUpperCase()} + ðŸ–±ï¸ `,mac:`${K.CTRL.toUpperCase()} + ðŸ–±ï¸ `},{label:"åˆ›å»ºåˆ†ç»„",win:`${X.CTRL.toUpperCase()} + G / ðŸ–±ï¸ `,mac:`${K.CTRL.toUpperCase()} + G / ðŸ–±ï¸`},{label:"è§£é™¤åˆ†ç»„",win:`${X.CTRL.toUpperCase()} + ${X.SHIFT.toUpperCase()} + G `,mac:`${K.CTRL.toUpperCase()} + ${X.SHIFT.toUpperCase()} + G `}],l=()=>{o("update:modelShow",!1)};return(v,p)=>{const i=D("n-icon"),d=D("n-space"),r=D("n-gradient-text"),n=D("n-table"),f=D("n-modal");return w(),N(f,{show:t.value,"onUpdate:show":p[0]||(p[0]=c=>t.value=c),"mask-closable":!0,onAfterLeave:l},{default:x(()=>[T(n,{class:"model-content",bordered:!1,"single-line":!1},{default:x(()=>[I("thead",null,[I("tr",null,[Yo,Bo,I("th",null,[T(d,{justify:"space-between"},{default:x(()=>[No,T(i,{size:"20",class:"go-cursor-pointer",onClick:l},{default:x(()=>[T(a(_))]),_:1})]),_:1})])])]),I("tbody",null,[(w(),P(re,null,ue(h,(c,u)=>I("tr",{key:u},[I("td",null,Q(c.label),1),I("td",null,Q(c.win),1),c.macSource?(w(),P("td",Xo,Q(c.mac),1)):(w(),P("td",Go,[T(r,{size:22},{default:x(()=>[ve(Q(c.mac.substr(0,1)),1)]),_:2},1024),ve(" + "+Q(c.mac.substr(3)),1)]))])),64))])]),_:1})]),_:1},8,["show"])}}});const zo=ee(Ko,[["__scopeId","data-v-b3c8d1a4"]]),Fo=e=>(Me("data-v-6fbf5bbb"),e=e(),Re(),e),Wo={class:"go-edit-shortcut"},Vo=Fo(()=>I("span",null,"å¿«æ·é”®",-1)),qo=j({__name:"index",setup(e){const{DicomOverlayIcon:o}=le.carbon,s=B(!1);return(_,t)=>{const h=D("n-icon"),l=D("n-button"),v=D("n-tooltip");return w(),P("div",Wo,[T(zo,{modelShow:s.value,"onUpdate:modelShow":t[0]||(t[0]=p=>s.value=p)},null,8,["modelShow"]),T(v,{trigger:"hover"},{trigger:x(()=>[T(l,{class:"scale-btn",secondary:"",size:"small",onClick:t[1]||(t[1]=p=>s.value=!0)},{default:x(()=>[T(h,{size:"21",depth:3},{default:x(()=>[T(a(o))]),_:1})]),_:1})]),default:x(()=>[Vo]),_:1})])}}});const jo=ee(qo,[["__scopeId","data-v-6fbf5bbb"]]),Jo={class:"go-edit-data-sync go-flex-items-center"},Zo=j({__name:"index",setup(e){he(d=>({"5f2316f3":h.value}));const{ReloadIcon:o}=le.ionicons5,s=te(),_=fe(),{saveStatus:t}=Se(s.getEditCanvas),h=B(_.getAppTheme),l=B(""),v=B("");let p=setTimeout(()=>{});const i={[pe.PENDING]:{text:"ç­‰å¾…è‡ªåŠ¨åŒæ­¥",type:""},[pe.START]:{text:"æ­£åœ¨åŒæ­¥ä¸­",type:"success"},[pe.SUCCESS]:{text:"åŒæ­¥æˆåŠŸï¼",type:"success"},[pe.FAILURE]:{text:"åŒæ­¥å¤±è´¥!",type:"error"}};return ae(()=>t.value,d=>{clearTimeout(p),l.value=i[d].text,v.value=i[d].type,p=setTimeout(()=>{l.value=i[pe.PENDING].text,v.value=i[pe.PENDING].type},3e3)},{immediate:!0}),(d,r)=>{const n=D("n-text"),f=D("n-tooltip"),c=D("n-icon"),u=D("n-spin");return w(),P("div",Jo,[T(f,{trigger:"hover"},{trigger:x(()=>[T(n,{class:"status-desc go-ml-2",type:v.value,depth:"3"},{default:x(()=>[ve(Q(l.value),1)]),_:1},8,["type"])]),default:x(()=>[I("span",null,Q(a(kt))+"s æ›´æ–°ä¸€æ¬¡",1)]),_:1}),be(T(u,{class:"go-ml-2",size:"small"},{icon:x(()=>[T(c,{size:"13"},{default:x(()=>[T(a(o))]),_:1})]),_:1},512),[[ke,l.value===i[1].text]])])}}});const Qo=ee(Zo,[["__scopeId","data-v-91fff540"]]),es={class:"go-edit-bottom"},ts=j({__name:"index",setup(e){he(L=>({"7e6afe20":t.value}));const{LockClosedOutlineIcon:o,LockOpenOutlineIcon:s}=le.ionicons5,_=fe(),t=B(_.getAppTheme),h=dt(),l=te(),{lockScale:v,scale:p}=Se(l.getEditCanvas),i=B(null);let d=[{label:"200%",value:200},{label:"150%",value:150},{label:"100%",value:100},{label:"50%",value:50},{label:"è‡ªé€‚åº”",value:0}];const r=B(""),n=L=>{var E;if((E=i.value)==null||E.blur(),L===0){h.setItemUnHandle(pt.RE_POSITION_CANVAS,!0),l.computedScale();return}l.setScale(L/100)},f=()=>{l.setEditCanvas(V.LOCK_SCALE,!v.value)},c=B(100),u=L=>`${L}%`,S=L=>{l.setScale(L/100)},g=Fe({100:""});return Lt(()=>{const L=(p.value*100).toFixed(0);r.value=`${L}%`,c.value=parseInt(L)}),(L,E)=>{const b=D("n-text"),Y=D("n-divider"),G=D("n-space"),se=D("n-select"),A=D("n-icon"),m=D("n-button"),R=D("n-tooltip"),C=D("n-slider");return w(),P("div",es,[T(G,null,{default:x(()=>[T(a(Po)),T(b,{id:"keyboard-dress-show",depth:"3"}),T(Y,{vertical:""}),T(a(Qo))]),_:1}),T(G,{class:"bottom-ri"},{default:x(()=>[T(a(jo)),T(se,{ref_key:"selectInstRef",ref:i,class:"scale-btn",value:r.value,"onUpdate:value":[E[0]||(E[0]=k=>r.value=k),n],size:"mini",disabled:a(v),options:a(d)},null,8,["value","disabled","options"]),T(R,{trigger:"hover"},{trigger:x(()=>[T(m,{onClick:f,text:""},{default:x(()=>[T(A,{class:ne(["lock-icon",{color:a(v)}]),size:"18",depth:2},{default:x(()=>[a(v)?(w(),N(a(o),{key:0})):(w(),N(a(s),{key:1}))]),_:1},8,["class"])]),_:1})]),default:x(()=>[I("span",null,Q(a(v)?"è§£é”":"é”å®š")+"å½“å‰æ¯”ä¾‹",1)]),_:1}),T(C,{class:"scale-slider",value:c.value,"onUpdate:value":[E[1]||(E[1]=k=>c.value=k),S],"default-value":50,min:10,max:200,step:5,"format-tooltip":u,disabled:a(v),marks:g},null,8,["value","disabled","marks"])]),_:1})])}}});const os=ee(ts,[["__scopeId","data-v-2fe5bac0"]]),Ce=te(),ss=()=>{Ce.setTargetSelectChart(void 0),$t(Dt(Ce.getStorageInfo||[]),void 0,"json");const e=document.querySelector(".go-edit-range"),o=document.getElementById("go-edit-watermark");if(!e||!o){window.$message.error("å¯¼å‡ºå¤±è´¥ï¼");return}const s=Ce.getEditCanvas.scale;Ce.setScale(1,!0),o.style.display="block",setTimeout(()=>{It(e,()=>{o&&(o.style.display="none"),Ce.setScale(s,!0)})},600)},ns=()=>{const e=B(),{updateComponent:o}=ut();return{importUploadFileListRef:e,importBeforeUpload:({file:t})=>{e.value=[];const h=t.file.type;return h!==st.JSON&&h!==st.TXT?(window.$message.warning("ä»…æ”¯æŒä¸Šä¼  ã€JSONã€‘ æ ¼å¼æ–‡ä»¶ï¼Œè¯·é‡æ–°ä¸Šä¼ ï¼"),!1):!0},importCustomRequest:t=>{const{file:h}=t;Mt(()=>{h.file?Rt(h.file).then(l=>{jt({message:"è¯·é€‰æ‹©å¯¼å…¥æ–¹å¼:",positiveText:"æ–°å¢žï¼ˆå¯æ’¤å›žï¼‰",negativeText:"è¦†ç›–ï¼ˆä¸å¯æ’¤å›žï¼‰",negativeButtonProps:{type:"info",ghost:!1},onPositiveCallback:()=>de(void 0,null,function*(){try{l=Be(l),yield o(l,!1,!0),window.$message.success("å¯¼å…¥æˆåŠŸï¼")}catch(v){console.log(v),window.$message.error("ç»„ä»¶å¯¼å…¥å¤±è´¥ï¼Œè¯·æ£€æŸ¥æ–‡ä»¶å®Œæ•´æ€§!")}}),onNegativeCallback:()=>de(void 0,null,function*(){try{l=Be(l),yield o(l,!0,!0),window.$message.success("å¯¼å…¥æˆåŠŸï¼")}catch(v){console.log(v),window.$message.error("ç»„ä»¶å¯¼å…¥å¤±è´¥ï¼Œè¯·æ£€æŸ¥æ–‡ä»¶å®Œæ•´æ€§!")}})})}):window.$message.error("å¯¼å…¥å¤±è´¥ï¼Œè¯·æ£€æŸ¥æ•°æ®æˆ–è”ç³»ç®¡ç†å‘˜ï¼")})}}};var ce=(e=>(e.BUTTON="button",e.IMPORTUPLOAD="importUpload",e))(ce||{});const as={class:"btn-item"},rs=j({__name:"index",setup(e){const{DownloadIcon:o,ShareIcon:s,PawIcon:_,SettingsSharpIcon:t,CreateIcon:h}=le.ionicons5,l=lt(),v=te();Ut(),Qt();let p=null;const i=B(!1),d=B(!0),r=B(!0),{importUploadFileListRef:n,importCustomRequest:f,importBeforeUpload:c}=ns(),u=M(()=>l.getChartToolsStatus===et.ASIDE),S=M(()=>l.getChartToolsStatusHide),g=M(()=>d.value&&S.value),L=M(()=>{if(!u.value)return se;const A=[];return se.map(m=>{A.unshift(m)}),A}),E=()=>{p=setTimeout(()=>{d.value&&(d.value=!1,r.value=!0)},200),setTimeout(()=>{r.value=!1},400)},b=()=>{clearTimeout(p),d.value||(d.value=!0)},Y=()=>{window.$message.warning("è¯·é€šè¿‡é¡¶éƒ¨ã€åŒæ­¥å†…å®¹ã€‘æŒ‰é’®åŒæ­¥æœ€æ–°æ•°æ®ï¼"),v.setEditCanvas(V.IS_CODE_EDIT,!0),setTimeout(()=>{const A=Ht(At.CHART_EDIT_NAME,"href");if(!A)return;const m=Pt();G(m),Yt(A,[m],void 0,!0)},2e3)},G=A=>{const m=v.getStorageInfo,R=Bt(Ee.GO_CHART_STORAGE_LIST)||[];if(R!=null&&R.length){const C=R.findIndex(k=>k.id===A);C!==-1?(R.splice(C,1,ge(H({},m),{id:A})),Ae(Ee.GO_CHART_STORAGE_LIST,R)):(R.push(ge(H({},m),{id:A})),Ae(Ee.GO_CHART_STORAGE_LIST,R))}else Ae(Ee.GO_CHART_STORAGE_LIST,[ge(H({},m),{id:A})])},se=[{key:"import",type:ce.IMPORTUPLOAD,name:"å¯¼å…¥",icon:s},{key:"export",type:ce.BUTTON,name:"å¯¼å‡º",icon:o,handle:ss},{key:"edit",type:ce.BUTTON,name:"ç¼–è¾‘",icon:h,handle:Y},{key:"setting",type:ce.BUTTON,name:"è®¾ç½®",icon:t,handle:()=>{i.value=!0}}];return(A,m)=>{const R=D("n-icon"),C=D("n-text"),k=D("n-button"),U=D("n-upload"),W=D("n-tooltip");return w(),P(re,null,[I("div",{class:ne(["go-chart-edit-tools",[a(l).getChartToolsStatus,g.value?"isMini":"unMini"]]),onClick:m[1]||(m[1]=O=>d.value&&(d.value=!1)),onMouseenter:E,onMouseleave:b},[be(T(R,{class:"asideLogo",size:"22"},{default:x(()=>[T(a(_))]),_:1},512),[[ke,a(l).getChartToolsStatus===a(et).ASIDE&&g.value]]),(w(!0),P(re,null,ue(L.value,(O,xe)=>(w(),N(W,{key:O.key,disabled:!u.value||S.value&&r.value,trigger:"hover",placement:"left"},{trigger:x(()=>[I("div",as,[O.type===a(ce).BUTTON?(w(),N(k,{key:0,circle:u.value,secondary:"",onClick:O.handle},{icon:x(()=>[u.value?(w(),N(R,{key:0,size:"22"},{default:x(()=>[(w(),N(_e(O.icon)))]),_:2},1024)):(w(),N(_e(O.icon),{key:1}))]),default:x(()=>[be(T(C,{depth:"3"},{default:x(()=>[ve(Q(O.name),1)]),_:2},1536),[[ke,!u.value]])]),_:2},1032,["circle","onClick"])):O.type===a(ce).IMPORTUPLOAD?(w(),N(U,{key:1,"file-list":a(n),"onUpdate:fileList":m[0]||(m[0]=F=>Ot(n)?n.value=F:null),"show-file-list":!1,customRequest:a(f),onBeforeUpload:a(c)},{default:x(()=>[T(k,{circle:u.value,secondary:""},{icon:x(()=>[u.value?(w(),N(R,{key:0,size:"22"},{default:x(()=>[(w(),N(_e(O.icon)))]),_:2},1024)):(w(),N(_e(O.icon),{key:1}))]),default:x(()=>[be(T(C,{depth:"3"},{default:x(()=>[ve(Q(O.name),1)]),_:2},1536),[[ke,!u.value]])]),_:2},1032,["circle"])]),_:2},1032,["file-list","customRequest","onBeforeUpload"])):ye("",!0)])]),default:x(()=>[I("span",null,Q(O.name),1)]),_:2},1032,["disabled"]))),128))],34),T(a(Zt),{modelShow:i.value,"onUpdate:modelShow":m[2]||(m[2]=O=>i.value=O)},null,8,["modelShow"])],64)}}});const cs=ee(rs,[["__scopeId","data-v-f91570e4"]]),ls=j({__name:"index",setup(e){const o=te(),{handleContextMenu:s}=We(),{dataSyncFetch:_,intervalDataSyncUpdate:t}=ut();Nt(),Xt(Ft,null),eo(()=>de(this,null,function*(){}));const{mouseenterHandle:h,mouseleaveHandle:l,mousedownHandle:v,mouseClickHandle:p}=vt(),i=(f,c,u)=>{if(o.getTargetChart.selectId.length>1)return c.filter(g=>[Z.GROUP,Z.DELETE].includes(g.key));const S=[];return u.status.lock?S.push(Z.LOCK):S.push(Z.UNLOCK),u.status.hide?S.push(Z.HIDE):S.push(Z.SHOW),f.filter(g=>!S.includes(g.key))},d=M(()=>o.getEditCanvasConfig.chartThemeSetting),r=M(()=>rt(o.getEditCanvasConfig.chartCustomThemeColorInfo)[o.getEditCanvasConfig.chartThemeColor]);M(()=>o.getEditCanvasConfig.filterShow);const n=M(()=>{const f=o.getEditCanvasConfig.background,c=o.getEditCanvasConfig.backgroundImage,g=o.getEditCanvasConfig.selectColor?{background:f||void 0}:{background:`url(${c}) no-repeat center center / cover !important`};return ge(H({},g),{width:"inherit",height:"inherit"})});return Ke(()=>{Wt(),_()}),(f,c)=>(w(),N(a(Jt),{id:"go-chart-edit-layout",flex:!0,showTop:!1,showBottom:!0,depth:1,xScroll:!0,disabledScroll:!0,onMousedown:a(_t),onDrop:a(oo),onDragover:a(nt),onDragenter:a(nt)},{aside:x(()=>[T(a(cs))]),bottom:x(()=>[T(a(os))]),default:x(()=>[T(a(bo),null,{default:x(()=>[I("div",{id:"go-chart-edit-content",onContextmenu:c[0]||(c[0]=(...u)=>a(s)&&a(s)(...u))},[T(a(xo),null,{default:x(()=>[I("div",{style:q(H(H({},a($e)(a(o).getEditCanvasConfig)),n.value))},[(w(!0),P(re,null,ue(a(o).getComponentList,(u,S)=>(w(),P("div",{key:u.id},[u.isGroup?(w(),N(a(io),{key:0,groupData:u,groupIndex:S},null,8,["groupData","groupIndex"])):(w(),N(a(Ge),{key:1,"data-id":u.id,index:S,style:q(H(H({},a(Ie)(u.attr,S)),a(ct)(u.styles))),item:u,onClick:g=>a(p)(g,u),onMousedown:g=>a(v)(g,u),onMouseenter:g=>a(h)(g,u),onMouseleave:g=>a(l)(g,u),onContextmenu:g=>a(s)(g,u,i)},{default:x(()=>[(w(),N(_e(u.chartConfig.chartKey),{class:ne(["edit-content-chart",a(Ne)(u.styles.animations)]),chartConfig:u,themeSetting:d.value,themeColor:r.value,style:q(H(H(H({},a(ie)(u.attr)),a($e)(u.styles)),a(Xe)(u.styles)))},null,8,["class","chartConfig","themeSetting","themeColor","style"]))]),_:2},1032,["data-id","index","style","item","onClick","onMousedown","onMouseenter","onMouseleave","onContextmenu"]))]))),128))],4)]),_:1})],32)]),_:1})]),_:1},8,["onMousedown","onDrop","onDragover","onDragenter"]))}});const Ms=ee(ls,[["__scopeId","data-v-7a98edb9"]]);export{Ms as default};
